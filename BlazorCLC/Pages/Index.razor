@page "/"

@inject CalculatorService calc
@inject CalculatorCIService calcCI 

<h1>Calculator on Blazor</h1>

<div class="calculatorWrapper">
    <div class="textBar">
        <span class="valueSecond">@calc.calc.ValueSecond</span>
        <span class="valueFirst">@calc.calc.ValueFirst</span>
    </div>

    <div class="buttonRow">
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(5)">%</button>

        @if (calcCI.calc.FlagCImenuActive)
        {
            <button type="button" class="btn defBtn defBtn-menuActive" @onclick="() => calcCI.ShowCompoundInterestMenu()">Menu</button>
        }
        else
        {
            <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calcCI.ShowCompoundInterestMenu()">Menu</button>
        }


        <button type="button" class="btn defBtn defBtn-correct" @onclick="() => calc.Clear(0)">C</button>
        <button type="button" class="btn defBtn defBtn-correct" @onclick="() => calc.Clear(1)">CE</button>
    </div>

    <div class="buttonRow">
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(6)">1/x</button>
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(7)">x²</button>
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(8)">√x</button>
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(4)">/</button>
    </div>

    <div class="buttonRow">
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('7'.ToString())">7</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('8'.ToString())">8</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('9'.ToString())">9</button>
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(3)">X</button>
    </div>

    <div class="buttonRow">
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('4'.ToString())">4</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('5'.ToString())">5</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('6'.ToString())">6</button>
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(2)">-</button>
    </div>

    <div class="buttonRow">
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('1'.ToString())">1</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('2'.ToString())">2</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('3'.ToString())">3</button>
        <button type="button" class="btn defBtn defBtn-opperation" @onclick="() => calc.ButtonClick(1)">+</button>
    </div>

    <div class="buttonRow">
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('.'.ToString())">.</button>
        <button type="button" class="btn defBtn defBtn-gray" @onclick="() => calc.ButtonClick('0'.ToString())">0</button>
        <button type="button" class="btn defBtn defBtn-result " @onclick="() => calc.Calculate()">=</button>
    </div>

    @if (calcCI.calc.FlagCImenuActive)
    {
        <div class="CImenuWrapper">
            <h4>Compount interest calculation</h4>

            <div class="inputRow">
                <input class="inputString" placeholder="Start sum" @bind="calcCI.calc.StartSum" />
                <input class="inputString" placeholder="% in year" @bind="calcCI.calc.PercentsInYear" />
            </div>
            <div class="inputRow">
                <input class="inputString" placeholder="Times add.sum" @bind="calcCI.calc.TimesAddSum" />
                <input class="inputString" placeholder="Q-ty years" @bind="calcCI.calc.Years" />
            </div>

            <button type="button" class="btn defBtn defBtn-clcCI"
                    @onclick="() => calcCI.Calculate(calcCI.calc.StartSum, calcCI.calc.PercentsInYear, calcCI.calc.TimesAddSum, calcCI.calc.Years)">
                Calculate CI
            </button>


            <br />
            @if (calcCI.calc.IncorrectInputCI)
            {
                <h4>Incorrect input!</h4>
            }
            else
            {
                <h4>@calcCI.calc.ValueCI</h4>
            }

        </div>

    }

</div>


